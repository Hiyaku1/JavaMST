# Java面试题***************分类

## 一、基础





## 二、框架



## 三、数据库





## 四、中间件



## 五、线上问题



## 六、分布式方案

### 1.分布式ID的生成方案有哪些

|                | 描述                                                         | 优点                                                         | 缺点                                                         |
| -------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| UUID           | UUID是通用唯一标识码的缩写，其目的是让分布式系统中的所有元素都有唯一的辨识信息，而不需要通过中央控制器来指定唯一标识。 | 1.降低全局节点的压力，使得主键生成速度更快；<br />2.生成的主键全局唯一；<br />3.跨服务器合并数据方便。 | 1.UUID占用16个字节，空间占用较多；<br />2.不是递增有序的数字，数据写入IO随机性很大，且索引效率下降。 |
| 数据库主键自增 | MySQL数据库设置主键且自动增长                                | 1.INT和BIGINT类型占用空间较小；<br />2.主键自动增长，IO写入连续性好；<br />3.数字类型查询速度优于字符串 | 1.并发性能不高，受限于数据库性能；<br />2.分库分表，需要改造，复杂；<br />3.自增：数据和数据量泄露 |
| Redis自增      | Redis计数器，原子性自增                                      | 使用内存，并发性能好                                         | 1.数据丢失；<br />2.自增：数据量泄露                         |
| 雪花算法       | 分布式ID的经典解决方案                                       | 1.不依赖外部组件；<br />2.性能好                             | 时钟回拨                                                     |

### 2. 雪花算法生成的ID由哪些部分组成？

![image-20211009221703226](Java面试题/image-20211009221703226.png)

1. 符号位，占用1位。
2. 时间戳，占用41位。
3. 机器ID，占用10位。
4. 序列号，占用12位。1毫秒可以生成4096个ID。

### 3.分布式锁在项目中有哪些应用场景？

使用分布式锁的场景一般满足以下场景：

1. 系统是一个分布式系统，集群，Java的锁已经锁不住。
2. 操作共享资源，比如库里唯一的用户数据。
3. 同步访问，即多个进程操作共享资源。

### 4.分布式锁有哪些解决方案

1. Redis的分布式锁，很多大公司会基于Redis做扩展开发。setnx key value，Redisson，
2. 基于Zookeeper,临时节点，顺序节点。
3. 基于数据库，比如MySQL。主键或唯一索引的唯一性

### 5.Redis做分布式锁死锁有哪些情况，如何解决？

情况1：加锁，没有释放锁。需要加释放锁的操作，比如delete key。

情况2：加锁后，程序还没有执行释放锁，程序挂了。需要用的key的过期机制。

### 6.Redis如何做分布式锁？



## 七、常见算法

### 1.滑动时间窗口算法是什么？

### 2.漏桶限流算法是什么？





## N、项目





